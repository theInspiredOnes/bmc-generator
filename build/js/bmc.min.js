angular.module("bmc",[]),angular.module("bmc").directive("area",function(){return{restrict:"C",scope:!0,template:'<div class="area__head">\n	<input class="area__title" type="text" value="{{title}}"></input>\n	<button class="area__add-element" title="Add new element"></button>\n</div>\n<div class="area__dropzone"></div>',link:function(a,b,c){var d,e,f,g;a.title=c.caption,g=function(b){return b.stopPropagation&&b.stopPropagation(),a.$broadcast("area::appendDraggedElement")},f=function(a){return a.preventDefault&&a.preventDefault(),a.dataTransfer.dropEffect="move",b.addClass("area--dragover")},e=function(){return b.removeClass("area--dragover")},d=function(){return a.$broadcast("area::appendNewElement")},a.$on("area::elementDropped",e),a.$on("area::addNewElement",d),b.bind("drop",g),b.bind("dragover",f),b.bind("dragleave",e)}}}),angular.module("bmc").directive("areaAddElement",function(){return{restrict:"C",template:"+",link:function(a,b){var c;c=function(){return a.$emit("area::addNewElement")},b.bind("click",c)}}}),angular.module("bmc").directive("areaDropzone",["draggedElementServ","$compile",function(a,b){return{restrict:"C",scope:!0,link:function(c,d){var e,f;f=function(){return d.append(a.draggedElement),c.$emit("area::elementDropped")},e=function(){var e;return e=b(a.getNewDragElement())(c),d.append(e)},c.$on("area::appendDraggedElement",f),c.$on("area::appendNewElement",e)}}}]),angular.module("bmc").directive("postIt",["draggedElementServ",function(a){return{restrict:"C",scope:!0,template:'<button class="post-it__delete" title="Delete"></button>\n<textarea ng-model="data.text"></textarea>',link:function(b,c){var d,e,f;c.attr("draggable","true"),b.data={},e=function(b){return a.draggedElement=c,c.addClass("post-it--dragged"),b.dataTransfer.setData("Text","")},d=function(){return c.removeClass("post-it--dragged")},f=function(d){return d.stopPropagation&&d.stopPropagation(),b.$emit("area::elementDropped"),c.after(a.draggedElement)},c.bind("dragstart",e),c.bind("dragend",d),c.bind("drop",f)},controller:["$scope","$element",function(a,b){var c;c=function(){return b.remove()},a.$on("postIt::delete",c)}]}}]),angular.module("bmc").directive("postItDelete",function(){return{restrict:"C",template:"&times;",link:function(a,b){var c;c=function(){return a.$emit("postIt::delete")},b.bind("click",c)}}}),angular.module("bmc").service("draggedElementServ",function(){this.draggedElement=null,this.getNewDragElement=function(){return'<div class="post-it"></div>'}});